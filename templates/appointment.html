<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment</title>
  <link rel="stylesheet" href="../static/css/datepicker_ui.css" />
  <link rel="icon" href="/static/images/logo1.png" type="image/icon type" />

  <!-- Bootstrap CSS File -->
  <link href="../static/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../static/css/bootstrap-multiselect.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" />
<!--   <link href="{{ url_for('static', filename='css/icofont.min.css') }}" rel="stylesheet" /> -->
  <!-- Libraries CSS Files -->
  <link href="{{ url_for('static', filename='css/sweetalert2.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='css/migrata_alert.css') }}" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

  <!-- Main Stylesheet File -->
  <link href="../static/css/style.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" type="text/css"
    href="https://cdn.datatables.net/buttons/2.2.2/css/buttons.dataTables.min.css" />
  <link rel="stylesheet" type="text/css"
    href="https://cdn.datatables.net/fixedcolumns/4.0.1/css/fixedColumns.dataTables.min.css" />


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

</head>

    
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

    <title>Home</title> -->
</head>
<style>
    .display table {
      width: 80%;
    }
  
    .display th {
      color: white;
      background: #87ceeb;
      height: 50px;
    }
  
    .display td {
      height: 50px;
    }
  
    .center {
      margin-left: auto;
      margin-right: auto;
    }
  
    .stylebutton {
      margin-left: 500px;
    }
  
    .ui-datepicker {
      width: 18em;
      margin-top: 70px;
    }
  
    h1 {
      color: green;
    }
  
    ul.multiselect-container {
      height: 250px;
      overflow: scroll;
      overflow-x: hidden;
    }
    #response{
      font-weight: bold;
    }

  
  </style>

<body>
  

   <div class="container-fluid header-wrapper sticky-top mb-5 p-0">
    <div class="container">
      <header>
        <nav class="navbar navbar-expand-lg p-0">
          <a class="navbar-brand pl-0" href="/home">
            <img src=/static/images/title_logo.png alt="no image" height="72" />
          </a>
          <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#nav">
            <span class="navbar-toggler-icon"><i class="material-icons">menu</i></span>
          </button>

          <!--  Banner part start        -->
          <div class="collapse navbar-collapse main-menu text-left" id="nav">
            <ul class="navbar-nav">
                <li class="nav-item">
                <a class="nav-link swipe-up" href="/home">
                  <span>Home</span></a>
              </li>
              <li class="nav-item active">
                <a style="padding:10px;" class="nav-link swipe-up" href="/book_appointment">
                  <span >Book Appointment</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link swipe-up" href="/inpatient_entry">
                  <span>Inpatient Entry</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link swipe-up" href="/view_dashboard">
                  <span>Dashboard</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link swipe-up" href="/view_stats">
                  <span>Statistics</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link swipe-up" href="/logout">
                  <span>Logout</span></a>
              </li>
            </ul>
          </div>
        </nav>
      </header>
    </div>
  </div>

  <!-- -------------Nav bar end------------------ -->

  <div class="container-fluid content-wrapper mb-5 p-0">
    <div class="container wrapper services">
      <div class="row">
        <div class="col-6 title">
          <h2>Book Appointment</h2>
        </div>
      </div>


      <div style="align-content: center; margin-left: -140px;" align="center" id="stats">
        <p class="h5" id="result"></p>
           </div>
      
    <br/>
    <div class="row">
    <div class="col-md-6">
    <form id="appoint_form">
        
        <label >Patient Name </label>
        <input type="text" id="pname" class="form-control" placeholder="Patient Name">
        <br/>
        <label >Age</label>

        <input type="text" id="age"  class="form-control"   placeholder="Age" onkeypress="return isNumber(event);" />

        <br/>
        
       
        <label >Gender</label><br>
       
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="gender" id="inlineRadio1" value="Male" checked>
          <label class="form-check-label" for="inlineRadio1">Male</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="gender" id="inlineRadio2" value="Female">
          <label class="form-check-label" for="inlineRadio2">Female</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="gender" id="inlineRadio3" value="Others">
          <label class="form-check-label" for="inlineRadio3">Others</label>
        </div>
        
        <br>
        <br>
        
        <label>Medical Complications</label><br>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox1" value="Diabetes">
          <label class="form-check-label" for="inlineCheckbox1">Diabetes</label>
        </div>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox2" value="Blood Pressure">
          <label class="form-check-label" for="inlineCheckbox2">Blood Pressure</label>
        </div>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox3" value="Thyroid">
          <label class="form-check-label" for="inlineCheckbox3">Thyroid</label>
        </div>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox3" value="Asthma">
          <label class="form-check-label" for="inlineCheckbox3">Asthma</label>
        </div>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox3" value="Cancer">
          <label class="form-check-label" for="inlineCheckbox3">Cancer</label>
        </div>
        <div class="form-check form-check-inline">
          <input name = "med_comp" class="form-check-input" type="checkbox" id="inlineCheckbox3" value="Heart Disease">
          <label class="form-check-label" for="inlineCheckbox3">Heart Disease</label>
        </div>
        <br><br>
        
        <label>Address</label>
        <textarea type="textarea" id="address"  class="form-control"    placeholder="Enter your Address" rows = 3></textarea>
        <br>

        

      </div>
      <!-- col 1  ends her -->
      <div class="col-md-6">


        <label>Date for Appointment</label>
        <input type="date" id="app_date"  class="form-control" />
        <br>        

        <label>Time for Appointment</label>
        <input type="time" id="app_time"  class="form-control" />
        <br>





        <label>Height</label>
        <input type="text" id="Height"  class="form-control"   placeholder="Height in cms" onkeypress="return isNumber(event);" />
        <br>
        
        <label>Weight</label>
        <input type="text" id="Weight"  class="form-control"   placeholder="Weights in KGs" onkeypress="return isNumber(event);" />
        <br>


        <!-- <div class="form-group col-md-6"> -->
          <div class="form-group">
            <label for="doctorname">Select Doctor</label>
            <select class="form-control" id="doctorname">
              <option selected="true" disabled="disabled">Doctors Available</option>    
              <option>Dr.Ravi Kumar</option>
              <option>Dr.Shobhana</option>
              <option>Dr.Subramanian</option>
              <option>Dr.Vijaya </option>
              <option>Dr.Sonia Thomas</option>
              <option>Dr.Vaseem Akram</option>
            </select>
          </div>
        <!-- </div> -->
        






        </div>


      </div>
        <button type="submit" id="submit-button" class="btn btn-primary" type="submit">Book Appointment</button>
    </form>
    
    </div>
 </div>

 <!-- <center>
 <div id="response"></div>
</center> -->





</body>


</html>
<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>

<script src="../static/js/popper.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/bootstrap-multiselect.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript"
  src="https://cdn.datatables.net/fixedcolumns/4.0.1/js/dataTables.fixedColumns.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.12.1/api/column().title().js"></script>

<script>


function isNumber(e){
    e = e || window.event;
    var charCode = e.which ? e.which : e.keyCode;
    return /\d/.test(String.fromCharCode(charCode));
}




$(document).ready(function() {
      $("#submit-button").click(function(event){

        // code for making the ui to wait for data from backend 
        event.preventDefault();

        var pname = document.getElementById('pname').value;
        var age =  document.getElementById('age').value;
        var gender = $('input[name="gender"]:checked').val();
        var med_comp = $("input[name='med_comp']:checked").map(function() {
                          return this.value;
                          }).get().join(', ');
                    
        var address =  document.getElementById('address').value;
        
        var height =  document.getElementById('Height').value;
        var weight =  document.getElementById('Weight').value;
        var dr_name =  document.getElementById('doctorname').value;
        
        var app_date =  document.getElementById('app_date').value;
        var app_time =  document.getElementById('app_time').value;
        
        
        
        console.log(age);
        console.log(gender,med_comp);
        console.log(address);
        console.log(height,weight);
        console.log(dr_name)
        console.log(app_date,app_time);
 
            
         $.ajax({
            url: "/appointment",
            type: "get",
            contentType: "application/json",
            data: {
              pname : pname,
              age : age,
              gender : gender,
              med_comp : med_comp,
              address : address,
              height : height,
              weight : weight,
              dr_name : dr_name,
              app_date : app_date,
              app_time : app_time
              
              
            
            },
           success: function(response) {
           
            console.log(response)
            if (response["appoint_res"]=="Failed"){
              document.getElementById("result").innerHTML = "Failed ! Re-enter the appointment details";
              document.getElementById("appoint_form").reset();
            }
            else{               
              document.getElementById("result").innerHTML = response["appoint_res"];
              document.getElementById("appoint_form").reset();
            }

            $('#stats').show();


         },
          error: function(xhr) {
        //Do Something to handle error
        console.log("Error")
        
        }
       });
     });
   });






</script>
