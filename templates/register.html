<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <!-- Font Awesome -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    rel="stylesheet"
    />
    <!-- MDB -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.css"
    rel="stylesheet"
    />
    <style>
       body, .bg-image {
  background-image: url('/static/images/dash.jpg');
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
 
}
    </style>
</head>

<body style="width: 20%; margin-right: 90%;margin-top: 2%; margin-left: 2%;">
  <div class="card" style="width: 24rem;margin-bottom: 15%;">
<br>
    <h1 class="fw-normal mb-3 pb-3" style="font-size:75px;text-align: center;font-size:xxx-large ;font-style: normal;color:#357EC7;">
      <b>WE CARE <span style="font-size:xx-large ;">HOSPITALS</span> </b></h1>
      

  <h4 class="fw-normal mb-3 pb-3" style="font-size:25px;text-align: center;font-size:x-large ;font-style: normal;color: #357EC7;">
  <b>SIGN UP</b></h1>
    <!-- <br/> -->
    <form style="width: 18rem; margin-left: 12.5%;"> 
      <!-- OLD CODE----------- -->
        <div class="msg" id ="msg" style="display: none"></div>
        <label >Username </label>
        <div class="form-outline mb-3">
        <input type="text" name="username" id="username" class="form-control" placeholder="Enter username" required>
        </div>
        
        <label >Email </label>

        <div class="form-outline mb-3">
          <input type="text" name="email" id="email" class="form-control" placeholder="Enter Email ID" required>
          </div>


        <label >Password </label>
        <div class="form-outline mb-4">
        <input type="password" name="password" id ="password" class="form-control" placeholder="Enter password" aria-required="true">
        </div>
        <label >Confirm Password </label>
        <div class="form-outline mb-4">
        <input type="password" name="confirm_password" id ="confirm_password" class="form-control" placeholder="Re-enter password" aria-required="true">
        </div>
        
        <div style="text-align: center;">
        <button type="submit" class="btn btn-primary" id="signup">SIGN UP</button>
        </div>
        <br/>
        <div class="text-center">
            <p>Already Registered? <a href="/"> Login Here</a></p>
        </div>
        

    </form>
  </div>
</body>

</html>

<!-- MDB -->
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.js"
></script>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>

<script src="../static/js/popper.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/bootstrap-multiselect.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript"
  src="https://cdn.datatables.net/fixedcolumns/4.0.1/js/dataTables.fixedColumns.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.12.1/api/column().title().js"></script>

<script type="text/javascript">


$(document).ready(function() {
      $("#signup").click(function(event){

        event.preventDefault();

        var username = document.getElementById('username').value;
        var password =  document.getElementById('password').value;
        var email = document.getElementById('email').value;
        var confirm_password =  document.getElementById('confirm_password').value;
        
        console.log(username,password,email,confirm_password);
              
        
         $.ajax({
            url: "/register",
            type: "get",
            contentType: "application/json",
            data: {
              username : username,
              email: email,
              password : password,
              confirm_password : confirm_password,
            },
           success: function(response) {
            console.log(response);
            if(response['registration'] == 'success'){
              alert('Successfully Registered')
              window.location = "/";
            }
            else if (response['registration'] =="Failed"){
              alert("Failed to register. Please Re-enter details")
              window.location = "/register_auth";
            }
            else{
              alert(response['registration']);
            }

         },
          error: function(xhr) {
        //Do Something to handle error
        console.log("Error")
        
        }
       });
     });
   });
</script>
